<div class="page">
  <div class="toolbar">
    <h2>xApps Management</h2>
    <button mat-icon-button (click)="refresh()" [disabled]="loading">
      <mat-icon>refresh</mat-icon>
    </button>
  </div>

  <div *ngIf="error" class="error-banner">{{ error }}</div>

  <div *ngIf="loading" class="loading">
    <mat-spinner diameter="40"></mat-spinner>
    <p>Loading xApps...</p>
  </div>

  <div *ngIf="!loading && !error" class="xapps-grid">
    <mat-card *ngFor="let xapp of xapps" class="xapp-card">
      <mat-card-header>
        <mat-icon mat-card-avatar class="app-avatar">widgets</mat-icon>
        <mat-card-title>{{ xapp.name }}</mat-card-title>
        <mat-card-subtitle>Namespace: {{ xapp.namespace }}</mat-card-subtitle>
      </mat-card-header>
      
      <mat-card-content>
        <div class="info-row">
          <span class="label">Status:</span>
          <span class="status" [class.running]="xapp.status === 'Running'">{{ xapp.status }}</span>
        </div>
        <div class="info-row">
          <span class="label">Replicas:</span>
          <span>{{ xapp.ready_replicas }} / {{ xapp.replicas }}</span>
        </div>
        <div class="info-row">
          <span class="label">Version:</span>
          <span>{{ xapp.version }}</span>
        </div>
        <div class="info-row">
          <span class="label">Health:</span>
          <span class="health" [class.healthy]="xapp.health.alive && xapp.health.ready">
            {{ xapp.health.alive && xapp.health.ready ? 'Healthy' : 'Unhealthy' }}
          </span>
        </div>
      </mat-card-content>

      <mat-card-actions>
        <button mat-button [routerLink]="['/xapps', xapp.name]">
          <mat-icon>info</mat-icon> Details
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <div *ngIf="!loading && !error && xapps.length === 0" class="empty">
    <mat-icon>inbox</mat-icon>
    <p>No xApps found</p>
  </div>
</div>
